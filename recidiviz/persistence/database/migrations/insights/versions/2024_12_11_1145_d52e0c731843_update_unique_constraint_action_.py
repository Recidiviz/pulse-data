# pylint: skip-file
"""update_unique_constraint_action_strategy_surfaced_events

Revision ID: d52e0c731843
Revises: 6f5763ed78d0
Create Date: 2024-12-11 11:45:59.336723

"""
import sqlalchemy as sa
from alembic import op

# revision identifiers, used by Alembic.
revision = "d52e0c731843"
down_revision = "6f5763ed78d0"
branch_labels = None
depends_on = None


def upgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_constraint(
        "action_strategy_surfaced_even_user_pseudonymized_id_officer_key",
        "action_strategy_surfaced_events",
        type_="unique",
    )
    op.create_unique_constraint(
        "action_strategy_surfaced_events_uniq_constraint",
        "action_strategy_surfaced_events",
        [
            "user_pseudonymized_id",
            "officer_pseudonymized_id",
            "action_strategy",
            "timestamp",
        ],
    )
    # ### end Alembic commands ###


def downgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_constraint(
        "action_strategy_surfaced_events_uniq_constraint",
        "action_strategy_surfaced_events",
        type_="unique",
    )
    op.create_unique_constraint(
        "action_strategy_surfaced_even_user_pseudonymized_id_officer_key",
        "action_strategy_surfaced_events",
        ["user_pseudonymized_id", "officer_pseudonymized_id", "action_strategy"],
    )
    # ### end Alembic commands ###
