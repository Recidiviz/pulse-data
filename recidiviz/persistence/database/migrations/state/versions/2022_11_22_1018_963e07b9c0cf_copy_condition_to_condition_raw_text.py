# pylint: skip-file
"""copy_condition_to_condition_raw_text

Revision ID: 963e07b9c0cf
Revises: d858ed06aa94
Create Date: 2022-11-22 10:18:01.324591

"""
import sqlalchemy as sa
from alembic import op

# revision identifiers, used by Alembic.
revision = "963e07b9c0cf"
down_revision = "d858ed06aa94"
branch_labels = None
depends_on = None


COPY_FROM_CONDITIONS_QUERY = """
    UPDATE state_supervision_violated_condition_entry
    SET condition_raw_text = condition
    """

SET_TO_NULL_QUERY = """
    UPDATE state_supervision_violated_condition_entry
    SET condition_raw_text = NULL
    """


def upgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    connection = op.get_bind()  # type: ignore [attr-defined]
    connection.execute(COPY_FROM_CONDITIONS_QUERY)
    # ### end Alembic commands ###


def downgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    connection = op.get_bind()  # type: ignore [attr-defined]
    connection.execute(SET_TO_NULL_QUERY)
    # ### end Alembic commands ###
