# pylint: skip-file
"""adjust_pfi_us_mi

Revision ID: 77774457c64b
Revises: 0ea507d4ebe0
Create Date: 2022-06-21 10:08:53.683661

"""
import sqlalchemy as sa
from alembic import op

from recidiviz.utils.string import StrictStringFormatter

# revision identifiers, used by Alembic.
revision = "77774457c64b"
down_revision = "0ea507d4ebe0"
branch_labels = None
depends_on = None

UPDATE_QUERY = (
    "UPDATE state_incarceration_period "
    "SET admission_reason = 'SANCTION_ADMISSION', specialized_purpose_for_incarceration = 'TREATMENT_IN_PRISON' "
    "WHERE state_code = 'US_MI' AND admission_reason_raw_text IN ('17', '18');"
)

DOWNGRADE_QUERY_1 = (
    "UPDATE state_incarceration_period SET specialized_purpose_for_incarceration = 'GENERAL' "
    "WHERE state_code = 'US_MI' AND admission_reason_raw_text IN ('17', '18');"
)
DOWNGRADE_QUERY_2 = (
    "UPDATE state_incarceration_period SET admission_reason = 'ADMITTED_FROM_SUPERVISION' "
    "WHERE state_code = 'US_MI' AND admission_reason_raw_text = '18';"
)


def upgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    op.execute(UPDATE_QUERY)
    # ### end Alembic commands ###


def downgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    op.execute(DOWNGRADE_QUERY_1)
    op.execute(DOWNGRADE_QUERY_2)
    # ### end Alembic commands ###
