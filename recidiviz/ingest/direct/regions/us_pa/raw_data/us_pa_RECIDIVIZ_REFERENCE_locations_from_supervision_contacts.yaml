# yaml-language-server: $schema=./../../../raw_data/yaml_schema/schema.json
file_tag: RECIDIVIZ_REFERENCE_locations_from_supervision_contacts
file_description: |-
  Hand-generated reference file containing supervision locations included in dbo_PRS_FACT_PAROLEE_CNTC_SUMRY
  raw data. To be used to translate locations in supervision contacts data to their 
  four-digit organization codes, which will then be translated back to uniform organization
  names downstream using the location_metadata reference view.

  To find additional locations that exist in contacts data for role types we are currently tracking,
  but do not yet exist in us_pa_location_metadata: 

  SELECT DISTINCT PRL_AGNT_ORG_NAME
  FROM `recidiviz-staging.us_pa_raw_data_up_to_date_views.dbo_PRS_FACT_PAROLEE_CNTC_SUMRY_latest`
  WHERE PRL_AGNT_JOB_CLASSIFCTN IN ('Prl Agt 1', 'Prl Agt 2','Prl Supv','Prl Mgr 1')
  AND UPPER(PRL_AGNT_ORG_NAME) NOT IN (
    SELECT DISTINCT location_name
    FROM `recidiviz-staging.reference_views.location_metadata_materialized`
  )

  These should be appended to the existing table. The organization codes must be added 
  manually, since supervision contacts data only provides the name of the location. 
  The Org_name values in supervision contacts data are the same as those in `dbo_LU_PBPP_Organization`,
  but with different abbreviation standards, so they cannot be matched automatically in
  a query and this sheet must be generated by hand.
data_classification: source
primary_key_cols:
  - Org_Name
columns:
  - name: Org_Name
    description: The human-readable name of the supervision site.
  - name: Org_cd
    description: The four-digit code used to refer to this location in `dbo_LU_PBPP_Organization`.
