# yaml-language-server: $schema=./../../../ingest_mappings/yaml_schema/1.0.0/schema.json
# This file associates the columns outputted from the query in `view_person` to the corresponding
# Ingest Object fields.
manifest_language: 1.0.0
input_columns:
  new_nysid: STRING
  birth: DATETIME
  genid: STRING
  race: STRING
  ethnic: STRING
unused_columns: []
output:
  StatePerson:
    external_ids:
      - StatePersonExternalId:
          external_id: new_nysid
          id_type: $literal("US_NY_SID")
    gender:
      $enum_mapping:
        $raw_text: genid
        $mappings:
          StateGender.MALE: "1"
          StateGender.FEMALE: "2"
          StateGender.NON_BINARY: "3"
          # TODO(#50870): Find definition for this value. Also, figure out if we want to use
          # the genid column to hydrate gender, or the more detailed gendid column. If we
          # use gendid, we'll need additional code value definitions for that column as well.
          StateGender.INTERNAL_UNKNOWN: "0"
    birthdate: birth
    races:
      - StatePersonRace:
          race:
            $enum_mapping:
              $raw_text: race
              $mappings:
                StateRace.WHITE: "1" # WHITE
                StateRace.BLACK: "2" # BLACK
                StateRace.AMERICAN_INDIAN_ALASKAN_NATIVE: "3" # NATIVE AMERICAN
                StateRace.ASIAN: "4" # ASIAN
                StateRace.OTHER: "5" # OTHER
                StateRace.EXTERNAL_UNKNOWN: "6" # UNKNOWN
    ethnicities:
      - StatePersonEthnicity:
          ethnicity:
            $enum_mapping:
              $raw_text: ethnic
              $mappings:
                StateEthnicity.HISPANIC: "1" # HISPANIC
                StateEthnicity.NOT_HISPANIC: "2" # NOT HISPANIC
                StateEthnicity.EXTERNAL_UNKNOWN: "3" # UNKNOWN
