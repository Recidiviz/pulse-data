# yaml-language-server: $schema=./../../../ingest_mappings/yaml_schema/1.0.0/schema.json
# This file associates the columns outputted from the query in `view_person` to the corresponding
# Ingest Object fields.
manifest_language: 1.0.0
input_columns:
  new_nysid: STRING
  birth: DATETIME
  gendid: STRING
  race: STRING
  ethnic: STRING
unused_columns: []
output:
  StatePerson:
    external_ids:
      - StatePersonExternalId:
          external_id: new_nysid
          id_type: $literal("US_NY_SID")
    gender:
      $enum_mapping:
        $raw_text: gendid
        $mappings:
          StateGender.MALE: M
          StateGender.FEMALE: F
          StateGender.NON_BINARY: X
    birthdate: birth
    races:
      - StatePersonRace:
          race:
            $enum_mapping:
              $raw_text: race
              $mappings:
                StateRace.WHITE: "1" # WHITE
                StateRace.BLACK: "2" # BLACK
                StateRace.AMERICAN_INDIAN_ALASKAN_NATIVE: "3" # NATIVE AMERICAN
                StateRace.ASIAN: "4" # ASIAN
                StateRace.OTHER: "5" # OTHER
                StateRace.EXTERNAL_UNKNOWN: "6" # UNKNOWN
    ethnicities:
      - StatePersonEthnicity:
          ethnicity:
            $enum_mapping:
              $raw_text: ethnic
              $mappings:
                StateEthnicity.HISPANIC: "1" # HISPANIC
                StateEthnicity.NOT_HISPANIC: "2" # NOT HISPANIC
                StateEthnicity.EXTERNAL_UNKNOWN: "3" # UNKNOWN
