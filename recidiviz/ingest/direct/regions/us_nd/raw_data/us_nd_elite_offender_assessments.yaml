# yaml-language-server: $schema=./../../../raw_data/yaml_schema/schema.json
file_tag: elite_offender_assessments
file_description: |-
  Includes one row per assessment taken by an individual. Assessments include classifications,
  institutional history, work performance reviews, mental health screens, and many more.
data_classification: source
primary_key_cols:
  - OFFENDER_BOOK_ID
  - ASSESSMENT_SEQ
columns:
  - name: APPROVED_SUP_LEVEL_TYPE
    description: Unknown. Always null.
  - name: ASSESS_COMMENT_TEXT
    description: |-
      Free text, usually a number of points. 
      TODO(#18645): Fill in with answer from ND
  - name: ASSESS_COMMITTE_CODE
    description: |-
      TODO(#18645): Fill in with answer from ND
  - name: ASSESS_STAFF_ID
    description: |-
      TODO(#18645): Fill in with answer from ND
    is_pii: True
    field_type: staff_external_id
  - name: ASSESS_STATUS
    description: |-
      TODO(#18645): Fill in with answer from ND
    known_values:
      - value: I
      - value: A
      - value: P
  - name: ASSESSMENT_CREATE_LOCATION
    description: |-
      Location where the assessment record was created.
  - name: ASSESSMENT_DATE
    description: |-
      The date this assessment took place.
    field_type: datetime
  - name: ASSESSMENT_SEQ
    description: |-
      TODO(#18645): Fill in with answer from ND
  - name: ASSESSMENT_TYPE_ID
    description: The ID of the assessment.
  - name: ASSESSOR_STAFF_ID
    description: |-
      ID of the staff member who did the assessment.
    is_pii: True
    field_type: staff_external_id
  - name: CALC_SUP_LEVEL_TYPE
    description: |-
      TODO(#18645): Fill in with answer from ND
  - name: COMMITTE_COMMENT_TEXT
    description: |-
      TODO(#18645): Fill in with answer from ND
    is_pii: True
  - name: CREATE_DATETIME
    description: |-
      The date and time this record was created.
    field_type: datetime
  - name: CREATE_USER_ID
    description: |-
      ID of the user who created the assessment record.
    is_pii: True
  - name: CREATION_DATE
    description: |-
      The date this record was created.
    field_type: datetime
  - name: CREATION_USER
    description: |-
      The username of the user who created the assessment record.
    is_pii: True
  - name: EVALUATION_DATE
    description: |-
      The date the assessment was carried out.
    field_type: datetime
  - name: EVALUATION_RESULT_CODE
    description: Code for the result of the assessment.
    known_values:
      - value: APP
        description: Approved
      - value: REJ
        description: Rejected
      - value: REFER
        description: Referral
      - value: NOTAPP
        description: Not approved
      - value: NOREF
        description: No Referral
      - value: DEFERRED
        description: Deferred
  - name: MODIFY_DATETIME
    description: |-
      The date and time this record was last modified.
    field_type: datetime
  - name: MODIFY_USER_ID
    description: |-
      The last user to modify this record.
    is_pii: True
  - name: NEXT_REVIEW_DATE
    description: |-
      For annual or otherwise regular assessments, the date the assessment should next be performed.
    field_type: datetime
  - name: OFFENDER_BOOK_ID
    description: |-
      External ID of a booking for a particular person, i.e. a new series of interactions 
      with the justice system due to a new offense.
  - name: OVERRIDE_COMMENT_TEXT
    description: |-
      TODO(#18645): Fill in with answer from ND
    is_pii: True
  - name: OVERRIDE_REASON
    description: |-
      TODO(#18645): Fill in with answer from ND
    is_pii: True
  - name: OVERRIDE_REASON_TEXT
    description: |-
      TODO(#18645): Fill in with answer from ND
    is_pii: True
  - name: OVERRIDE_STAFF_ID
    description: ID of staff member making override decision.
    is_pii: True
  - name: OVERRIDE_USER_ID
    description: Username of staff member making override decision.
    is_pii: True
  - name: OVERRIDED_SUP_LEVEL_TYPE
    description: |-
      TODO(#18645): Fill in with answer from ND
  - name: PLACE_AGY_LOC_ID
    description: |-
      TODO(#18645): Fill in with answer from ND
  - name: REVIEW_COMMITTE_CODE
    description: |-
      TODO(#18645): Fill in with answer from ND
  - name: REVIEW_PLACE_AGY_LOC_ID
    description: |-
      TODO(#18645): Fill in with answer from ND
  - name: REVIEW_PLACEMENT_TEXT
    description: |-
      TODO(#18645): Fill in with answer from ND
    is_pii: True
  - name: REVIEW_SUP_LEVEL_TEXT
    description: |-
      TODO(#18645): Fill in with answer from ND
    is_pii: True
  - name: REVIEW_SUP_LEVEL_TYPE
    description: |-
      TODO(#18645): Fill in with answer from ND
  - name: SCORE
    description: Presumably the person's score on this particular assessment.
  - name: SEAL_FLAG
    description: |-
      TODO(#18645): Fill in with answer from ND
always_historical_export: False
table_relationships:
  - foreign_table: elite_assessment_results
    join_logic:
      - elite_offender_assessments.ASSESSMENT_TYPE_ID = elite_assessment_results.ASSESSMENT_ID
  - foreign_table: elite_assessment_supervisors
    join_logic:
      - elite_offender_assessments.ASSESSMENT_TYPE_ID = elite_assessment_supervisors.ASSESSMENT_ID
  - foreign_table: elite_offenderassessmentitems
    join_logic:
      - elite_offender_assessments.ASSESSMENT_TYPE_ID = elite_offenderassessmentitems.ASSESSMENT_ID
  - foreign_table: elite_assessments
    join_logic:
      - elite_offender_assessments.ASSESSMENT_TYPE_ID = elite_assessments.ASSESSMENT_ID
