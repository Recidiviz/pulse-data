{
  "$schema": "http://json-schema.org/draft-07/schema",
  "description": "An expression that returns a string generated by selecting a value at a given key out of a JSON string.",
  "type": "object",
  "required": ["$json_extract"],
  "additionalProperties": false,
  "properties": {
    "$json_extract": {
      "type": "object",
      "additionalProperties": false,
      "required": ["$json", "$key"],
      "properties": {
        "$json": {
          "description": "An expression which produces a JSON string.",
          "$ref": "index.json"
        },
        "$key": {
          "description": "The key within that JSON to select.",
          "type": "string"
        }
      }
    }
  },
  "examples": [
    {
      "$json_extract": {
        "$key": "race",
        "$json": "DEMOGRAPHICINFO"
      }
    },
    {
      "$json_extract": {
        "$key": "violation_code",
        "$json": "$iter_item"
      }
    }
  ],
  "#contextualized_examples": [
    {
      "$foreach": {
        "$iterable": {
          "$split_json": "violation_types"
        },
        "$result": {
          "StateSupervisionViolatedConditionEntry": {
            "condition": {
              "$custom": {
                "$function": "us_pa_custom_parsers.violated_condition_from_violation_code",
                "$args": {
                  "violation_code": {
                    "$json_extract": {
                      "$key": "violation_code",
                      "$json": "$iter_item"
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  ]
}
