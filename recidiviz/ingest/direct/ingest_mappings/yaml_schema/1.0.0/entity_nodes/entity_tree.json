{
  "$schema": "http://json-schema.org/draft-07/schema",
  "definitions": {
    "manifest": {
      "type": "object",
      "description": "Describes how we use some or all of the columns in an ingest view row to hydrate a schema entity (and its child entities).",
      "additionalProperties": false,
      "patternProperties": {
        "^([A-Z][a-z]+)+$": {
          "type": "object",
          "description": "Describes the map of all entity field names to their values.",
          "additionalProperties": false,
          "patternProperties": {
            "^([a-z][a-z_]+)+$": {
              "description": "Describes how we use some or all of the columns in an ingest view row to hydrate a single field on a schema entity.",
              "oneOf": [
                {
                  "$ref": "#/definitions/manifest"
                },
                {
                  "$ref": "../node_types.json#/definitions/string_node"
                },
                {
                  "$ref": "../node_types.json#/definitions/enum_node"
                },
                {
                  "$ref": "#/definitions/child_entity_list"
                }
              ]
            }
          }
        }
      }
    },
    "child_entity_list": {
      "description": "A list that we can use to hydrate a list field on an entity, where each value is defined by the nodes in this list.",
      "type": "array",
      "items": {
        "oneOf": [
          {
            "$ref": "#/definitions/manifest"
          },
          {
            "description": "TODO(#9099): Replace with any nodes that can be used as entity list items (i.e. $conditional, $foreach).",
            "$ref": "../fallback_object_node.json#/definitions/manifest"
          }
        ]
      }
    }
  }
}
